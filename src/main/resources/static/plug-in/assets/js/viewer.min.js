!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("Viewer requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(y,e){"use strict";function o(e){return we.call(e).slice(8,-1).toLowerCase()}function c(e){return"string"==typeof e}function x(e){return"number"==typeof e&&!isNaN(e)}function r(e){return void 0===e}function s(e){return"object"==typeof e&&null!==e}function m(e){return"function"===o(e)}function a(e,t){return t=0<=t?t:0,Array.from?Array.from(e).slice(t):be.call(e,t)}function l(i,e){var n=-1;return e.indexOf?e.indexOf(i):(z(e,function(e,t){return e===i?(n=t,!1):void 0}),n)}function u(e){return c(e)&&(e=e.trim?e.trim():e.replace(i,"1")),e}function z(e,t){var i,n,a;if(e&&m(t))if(a=e,(Array.isArray?Array.isArray(a):"array"===o(a))||x(e.length))for(n=0,i=e.length;n<i&&!1!==t.call(e,e[n],n,e);n++);else if(s(e))for(n in e)if(e.hasOwnProperty(n)&&!1===t.call(e,e[n],n,e))break;return e}function f(i){var e;if(1<arguments.length){if(e=a(arguments),Object.assign)return Object.assign.apply(Object,e);e.shift(),z(e,function(e){z(e,function(e,t){i[t]=e})})}return i}function d(e,t){var i=a(arguments,2);return function(){return e.apply(t,i.concat(a(arguments)))}}function h(e,t){var i=e.style;z(t,function(e,t){le.test(t)&&x(e)&&(e+="px"),i[t]=e})}function v(e,t){return e.classList?e.classList.contains(t):-1<e.className.indexOf(t)}function g(e,t){var i;if(t){if(x(e.length))return z(e,function(e){g(e,t)});if(e.classList)return e.classList.add(t);(i=u(e.className))?i.indexOf(t)<0&&(e.className=i+" "+t):e.className=t}}function w(e,t){return t?x(e.length)?z(e,function(e){w(e,t)}):e.classList?e.classList.remove(t):void(0<=e.className.indexOf(t)&&(e.className=e.className.replace(t,""))):void 0}function p(e,t,i){return x(e.length)?z(e,function(e){p(e,t,i)}):void(i?g(e,t):w(e,t))}function b(e,t){return s(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-"+t)}function D(e,t,i){s(i)&&r(e[t])?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-"+t,i)}function E(t,e,i,n){var a=u(e).split(ue),o=i;return 1<a.length?z(a,function(e){E(t,e,i)}):(n&&(i=function(){return k(t,e,i),o.apply(t,arguments)}),void(t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)))}function k(t,e,i){var n=u(e).split(ue);return 1<n.length?z(n,function(e){k(t,e,i)}):void(t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i))}function I(e,t){var i;return e.dispatchEvent?(m(_)?i=new _(t,{bubbles:!0,cancelable:!0}):(i=C.createEvent("Event")).initEvent(t,!0,!0),e.dispatchEvent(i)):e.fireEvent?e.fireEvent("on"+t):void 0}function L(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function T(e){var t,i=e||y.event;return i.target||(i.target=i.srcElement||C),x(i.pageX)||(t=C.documentElement,i.pageX=i.clientX+(y.scrollX||t&&t.scrollLeft||0)-(t&&t.clientLeft||0),i.pageY=i.clientY+(y.scrollY||t&&t.scrollTop||0)-(t&&t.clientTop||0)),i}function Y(e,t){return e.getElementsByTagName(t)}function F(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)}function X(t,e){return e.length?z(e,function(e){X(t,e)}):void t.appendChild(e)}function t(e){e.parentNode&&e.parentNode.removeChild(e)}function S(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function V(e,t){r(e.textContent)?e.innerText=t:e.textContent=t}function N(e){return e.offsetWidth}function n(e,t){var i;return e.naturalWidth?t(e.naturalWidth,e.naturalHeight):((i=C.createElement("img")).onload=function(){t(this.width,this.height)},void(i.src=e.src))}function P(e){switch(e){case 2:return"viewer-hide-xs-down";case 3:return"viewer-hide-sm-down";case 4:return"viewer-hide-md-down"}}function A(e,t){var i=this;i.element=e,i.options=f({},A.DEFAULTS,function(e){var t,i;if(!s(e))return!1;try{return i=(t=e.constructor).prototype,t&&i&&pe.call(i,"isPrototypeOf")}catch(e){return!1}}(t)&&t),i.isImg=!1,i.isBuilt=!1,i.isShown=!1,i.isViewed=!1,i.isFulled=!1,i.isPlayed=!1,i.wheeling=!1,i.playing=!1,i.fading=!1,i.tooltiping=!1,i.transitioning=!1,i.action=!1,i.target=!1,i.timeout=!1,i.index=0,i.length=0,i.init()}var C=y.document,_=y.Event,R="viewer",q=R+"-fixed",M=R+"-open",B=R+"-show",O=R+"-hide",W=R+"-fade",H=R+"-in",j=R+"-active",U=R+"-invisible",Z=R+"-transition",K=R+"-fullscreen-exit",$="mousedown touchstart pointerdown MSPointerDown",G="mousemove touchmove pointermove MSPointerMove",J="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",Q="wheel mousewheel DOMMouseScroll",ee="transitionend",te="load",ie="keydown",ne="click",ae="built",oe="shown",re="view",se="viewed",le=/width|height|left|top|marginLeft|marginTop/,i=/^\s+(.*)\s+$/,ue=/\s+/,ce=void 0!==C.createElement(R).style.transition,de=Math.min,he=Math.max,me=Math.abs,fe=Math.sqrt,ve=Math.round,ge=Object.prototype,we=ge.toString,pe=ge.hasOwnProperty,be=Array.prototype.slice;A.prototype={constructor:A,init:function(){var e=this,t=e.options,i=e.element,n="img"===i.tagName.toLowerCase(),a=n?[i]:Y(i,"img"),o=a.length,r=d(e.ready,e);b(i,R)||(D(i,R,e),o&&(m(t.build)&&E(i,"build",t.build,!0),!1!==I(i,"build")&&(ce||(t.transition=!1),e.isImg=n,e.length=o,e.count=0,e.images=a,e.body=C.body,t.inline?(E(i,ae,function(){e.view()},!0),z(a,function(e){e.complete?r():E(e,te,r,!0)})):E(i,ne,e._start=d(e.start,e)))))},ready:function(){this.count++,this.count===this.length&&this.build()},build:function(){var e,t,i,n,a,o,r,s,l,u=this,c=u.options,d=u.element;u.isBuilt||((e=C.createElement("div")).innerHTML=A.TEMPLATE,u.parent=t=d.parentNode,u.viewer=i=F(e,"viewer-container")[0],u.canvas=F(i,"viewer-canvas")[0],u.footer=F(i,"viewer-footer")[0],u.title=r=F(i,"viewer-title")[0],u.toolbar=a=F(i,"viewer-toolbar")[0],u.navbar=o=F(i,"viewer-navbar")[0],u.button=n=F(i,"viewer-button")[0],u.tooltipBox=F(i,"viewer-tooltip")[0],u.player=F(i,"viewer-player")[0],u.list=F(i,"viewer-list")[0],g(r,c.title?P(c.title):O),g(a,c.toolbar?P(c.toolbar):O),g(o,c.navbar?P(c.navbar):O),p(n,O,!c.button),p(a.querySelectorAll("li[class*=zoom]"),U,!c.zoomable),p(a.querySelectorAll("li[class*=flip]"),U,!c.scalable),c.rotatable||(g(s=a.querySelectorAll("li[class*=rotate]"),U),X(a,s)),c.inline?(g(n,"viewer-fullscreen"),h(i,{zIndex:c.zIndexInline}),"static"===(l=t,y.getComputedStyle?y.getComputedStyle(l,null):l.currentStyle).position&&h(t,{position:"relative"})):(g(n,"viewer-close"),g(i,q),g(i,W),g(i,O),h(i,{zIndex:c.zIndex})),t.insertBefore(i,d.nextSibling),c.inline&&(u.render(),u.bind(),u.isShown=!0),u.isBuilt=!0,m(c.built)&&E(d,ae,c.built,!0),I(d,ae))},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,t(this.viewer))},bind:function(){var e=this,t=e.options,i=e.element,n=e.viewer;m(t.view)&&E(i,re,t.view),m(t.viewed)&&E(i,se,t.viewed),E(n,ne,e._click=d(e.click,e)),E(n,Q,e._wheel=d(e.wheel,e)),E(e.canvas,$,e._mousedown=d(e.mousedown,e)),E(C,G,e._mousemove=d(e.mousemove,e)),E(C,J,e._mouseup=d(e.mouseup,e)),E(C,ie,e._keydown=d(e.keydown,e)),E(y,"resize",e._resize=d(e.resize,e))},unbind:function(){var e=this,t=e.options,i=e.element,n=e.viewer;m(t.view)&&k(i,re,t.view),m(t.viewed)&&k(i,se,t.viewed),k(n,ne,e._click),k(n,Q,e._wheel),k(e.canvas,$,e._mousedown),k(C,G,e._mousemove),k(C,J,e._mouseup),k(C,ie,e._keydown),k(y,"resize",e._resize)},render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initContainer:function(){this.containerData={width:y.innerWidth,height:y.innerHeight}},initViewer:function(){var e,t=this,i=t.options,n=t.parent;i.inline&&(t.parentData=e={width:he(n.offsetWidth,i.minWidth),height:he(n.offsetHeight,i.minHeight)}),(t.isFulled||!e)&&(e=t.containerData),t.viewerData=f({},e)},renderViewer:function(){this.options.inline&&!this.isFulled&&h(this.viewer,this.viewerData)},initList:function(){var r=this,s=r.options,l=r.element,e=r.list,u=[];z(r.images,function(e,t){var i,n=e.src,a=e.alt||(c(i=n)?i.replace(/^.*\//,"").replace(/[\?&#].*$/,""):""),o=s.url;n&&(c(o)?o=e.getAttribute(o):m(o)&&(o=o.call(l,r)),u.push('<li><img src="'+n+'" data-action="view" data-index="'+t+'" data-original-url="'+(o||n)+'" alt="'+a+'"></li>'))}),e.innerHTML=u.join(""),z(Y(e,"img"),function(e){D(e,"filled",!0),E(e,te,d(r.loadImage,r),!0)}),r.items=Y(e,"li"),s.transition&&E(l,se,function(){g(e,Z)},!0)},renderList:function(e){var t=this,i=e||t.index,n=t.items[i].offsetWidth||30,a=n+1;h(t.list,{width:a*t.length,marginLeft:(t.viewerData.width-n)/2-a*i})},resetList:function(){S(this.list),w(this.list,Z),h({marginLeft:0})},initImage:function(s){var l=this,u=l.options,e=l.image,t=l.viewerData,i=l.footer.offsetHeight,c=t.width,d=he(t.height-i,i),h=l.imageData||{};n(e,function(e,t){var i,n,a=e/t,o=c,r=d;c<d*a?r=c/a:o=d*a,i=f({},n={naturalWidth:e,naturalHeight:t,aspectRatio:a,ratio:(o=de(.9*o,e))/e,width:o,height:r=de(.9*r,t),left:(c-o)/2,top:(d-r)/2}),u.rotatable&&(n.rotate=h.rotate||0,i.rotate=0),u.scalable&&(n.scaleX=h.scaleX||1,n.scaleY=h.scaleY||1,i.scaleX=1,i.scaleY=1),l.imageData=n,l.initialImageData=i,m(s)&&s()})},renderImage:function(e){var t,i,n,a,o,r=this.image,s=this.imageData,l=(i=[],n=(t=s).rotate,a=t.scaleX,o=t.scaleY,x(n)&&i.push("rotate("+n+"deg)"),x(a)&&x(o)&&i.push("scale("+a+","+o+")"),i.length?i.join(" "):"none");h(r,{width:s.width,height:s.height,marginLeft:s.left,marginTop:s.top,WebkitTransform:l,msTransform:l,transform:l}),m(e)&&(this.transitioning?E(r,ee,e,!0):e())},resetImage:function(){this.image&&(t(this.image),this.image=null)},start:function(e){var t=T(e).target;"img"===t.tagName.toLowerCase()&&(this.target=t,this.show())},click:function(e){var t=this,i=T(e).target,n=b(i,"action"),a=t.imageData;switch(n){case"mix":t.isPlayed?t.stop():t.options.inline?t.isFulled?t.exit():t.full():t.hide();break;case"view":t.view(b(i,"index"));break;case"zoom-in":t.zoom(.1,!0);break;case"zoom-out":t.zoom(-.1,!0);break;case"one-to-one":t.toggle();break;case"reset":t.reset();break;case"prev":t.prev();break;case"play":t.play();break;case"next":t.next();break;case"rotate-left":t.rotate(-90);break;case"rotate-right":t.rotate(90);break;case"flip-horizontal":t.scaleX(-a.scaleX||-1);break;case"flip-vertical":t.scaleY(-a.scaleY||-1);break;default:t.isPlayed&&t.stop()}},load:function(){var e=this,t=e.options,i=e.image,n=e.viewerData;e.timeout&&(clearTimeout(e.timeout),e.timeout=!1),w(i,U),i.style.cssText="width:0;height:0;margin-left:"+n.width/2+"px;margin-top:"+n.height/2+"px;max-width:none!important;visibility:visible;",e.initImage(function(){p(i,Z,t.transition),p(i,"viewer-move",t.movable),e.renderImage(function(){e.isViewed=!0,I(e.element,se)})})},loadImage:function(e){var o=T(e).target,t=o.parentNode,r=t.offsetWidth||30,s=t.offsetHeight||50,l=!!b(o,"filled");n(o,function(e,t){var i=e/t,n=r,a=s;r<s*i?l?n=s*i:a=r/i:l?a=r/i:n=s*i,h(o,{width:n,height:a,marginLeft:(r-n)/2,marginTop:(s-a)/2})})},resize:function(){var t=this;t.initContainer(),t.initViewer(),t.renderViewer(),t.renderList(),t.isViewed&&t.initImage(function(){t.renderImage()}),t.isPlayed&&z(Y(t.player,"img"),function(e){E(e,te,d(t.loadImage,t),!0),I(e,te)})},wheel:function(e){var t=this,i=T(e),n=Number(t.options.zoomRatio)||.1,a=1;t.isViewed&&(L(i),t.wheeling||(t.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),i.deltaY?a=0<i.deltaY?1:-1:i.wheelDelta?a=-i.wheelDelta/120:i.detail&&(a=0<i.detail?1:-1),t.zoom(-a*n,!0,i)))},keydown:function(e){var t=this,i=T(e),n=t.options,a=i.keyCode||i.which||i.charCode;if(t.isFulled&&n.keyboard)switch(a){case 27:t.isPlayed?t.stop():n.inline?t.isFulled&&t.exit():t.hide();break;case 32:t.isPlayed&&t.stop();break;case 37:t.prev();break;case 38:L(i),t.zoom(n.zoomRatio,!0);break;case 39:t.next();break;case 40:L(i),t.zoom(-n.zoomRatio,!0);break;case 48:case 49:(i.ctrlKey||i.shiftKey)&&(L(i),t.toggle())}},mousedown:function(e){var t,i,n=this,a=n.options,o=T(e),r=!!a.movable&&"move",s=o.touches;if(n.isViewed){if(s){if(1<(t=s.length)){if(!a.zoomable||2!==t)return;i=s[1],n.startX2=i.pageX,n.startY2=i.pageY,r="zoom"}else n.isSwitchable()&&(r="switch");i=s[0]}r&&(L(o),n.action=r,n.startX=i?i.pageX:o.pageX,n.startY=i?i.pageY:o.pageY)}},mousemove:function(e){var t,i,n=this,a=n.options,o=T(e),r=n.action,s=n.image,l=o.touches;if(n.isViewed){if(l){if(1<(t=l.length)){if(!a.zoomable||2!==t)return;i=l[1],n.endX2=i.pageX,n.endY2=i.pageY}i=l[0]}r&&(L(o),"move"===r&&a.transition&&v(s,Z)&&w(s,Z),n.endX=i?i.pageX:o.pageX,n.endY=i?i.pageY:o.pageY,n.change(o))}},mouseup:function(e){var t=T(e),i=this.action;i&&(L(t),"move"===i&&this.options.transition&&g(this.image,Z),this.action=!1)},show:function(){var e,t=this,i=t.options,n=t.element;return i.inline||t.transitioning||(t.isBuilt||t.build(),e=t.viewer,m(i.show)&&E(n,"show",i.show,!0),!1===I(n,"show")||(g(t.body,M),w(e,O),E(n,oe,function(){t.view(t.target?l(t.target,a(t.images)):t.index),t.target=!1},!0),i.transition?(t.transitioning=!0,g(e,Z),N(e),E(e,ee,d(t.shown,t),!0),g(e,H)):(g(e,H),t.shown()))),t},hide:function(){var e=this,t=e.options,i=e.element,n=e.viewer;return t.inline||e.transitioning||!e.isShown||(m(t.hide)&&E(i,"hide",t.hide,!0),!1===I(i,"hide")||(e.isViewed&&t.transition?(e.transitioning=!0,E(e.image,ee,function(){E(n,ee,d(e.hidden,e),!0),w(n,H)},!0),e.zoomTo(0,!1,!1,!0)):(w(n,H),e.hidden()))),e},view:function(e){var t,i,n,a,o,r=this,s=r.element,l=r.title,u=r.canvas;return e=Number(e)||0,!r.isShown||r.isPlayed||e<0||e>=r.length||r.isViewed&&e===r.index||!1===I(s,re)||(a=b(n=Y(i=r.items[e],"img")[0],"originalUrl"),o=n.getAttribute("alt"),(t=C.createElement("img")).src=a,t.alt=o,r.image=t,r.isViewed&&w(r.items[r.index],j),g(i,j),r.isViewed=!1,r.index=e,r.imageData=null,g(u,U),S(u),X(u,t),r.renderList(),S(l),E(s,se,function(){var e=r.imageData,t=e.naturalWidth,i=e.naturalHeight;V(l,o+" ("+t+" Ã— "+i+")")},!0),t.complete?r.load():(E(t,te,d(r.load,r),!0),r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(function(){w(t,U),r.timeout=!1},1e3))),r},prev:function(){return this.view(he(this.index-1,0)),this},next:function(){return this.view(de(this.index+1,this.length-1)),this},move:function(e,t){var i=this.imageData;return this.moveTo(r(e)?e:i.left+Number(e),r(t)?t:i.top+Number(t)),this},moveTo:function(e,t){var i=this,n=i.imageData,a=!1;return r(t)&&(t=e),e=Number(e),t=Number(t),i.isViewed&&!i.isPlayed&&i.options.movable&&(x(e)&&(n.left=e,a=!0),x(t)&&(n.top=t,a=!0),a&&i.renderImage()),i},zoom:function(e,t,i){var n=this.imageData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(n.width*e/n.naturalWidth,t,i),this},zoomTo:function(e,t,i,n){var a,o,r,s,l,u,c,d,h,m,f,v=this,g=v.options,w=.01,p=100,b=v.imageData;return x(e=he(0,e))&&v.isViewed&&!v.isPlayed&&(n||g.zoomable)&&(n||(w=he(w,g.minZoomRatio),p=de(p,g.maxZoomRatio),e=de(he(e,w),p)),.95<e&&e<1.05&&(e=1),a=b.naturalWidth*e,o=b.naturalHeight*e,i?(h=v.viewer,m=C.documentElement,r={left:(f=h.getBoundingClientRect()).left+(y.scrollX||m&&m.scrollLeft||0)-(m&&m.clientLeft||0),top:f.top+(y.scrollY||m&&m.scrollTop||0)-(m&&m.clientTop||0)},s=i.touches?(l=i.touches,u=l.length,d=c=0,u&&(z(l,function(e){c+=e.pageX,d+=e.pageY}),c/=u,d/=u),{pageX:c,pageY:d}):{pageX:i.pageX,pageY:i.pageY},b.left-=(a-b.width)*((s.pageX-r.left-b.left)/b.width),b.top-=(o-b.height)*((s.pageY-r.top-b.top)/b.height)):(b.left-=(a-b.width)/2,b.top-=(o-b.height)/2),b.width=a,b.height=o,b.ratio=e,v.renderImage(),t&&v.tooltip()),v},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e)),this},rotateTo:function(e){var t=this,i=t.imageData;return x(e=Number(e))&&t.isViewed&&!t.isPlayed&&t.options.rotatable&&(i.rotate=e,t.renderImage()),t},scale:function(e,t){var i=this,n=i.imageData,a=!1;return r(t)&&(t=e),e=Number(e),t=Number(t),i.isViewed&&!i.isPlayed&&i.options.scalable&&(x(e)&&(n.scaleX=e,a=!0),x(t)&&(n.scaleY=t,a=!0),a&&i.renderImage()),i},scaleX:function(e){return this.scale(e,this.imageData.scaleY),this},scaleY:function(e){return this.scale(this.imageData.scaleX,e),this},play:function(){var e,t=this,a=t.options,o=t.player,r=d(t.loadImage,t),s=[],l=0,u=0;return!t.isShown||t.isPlayed||(a.fullscreen&&t.requestFullscreen(),t.isPlayed=!0,g(o,B),z(t.items,function(e,t){var i=Y(e,"img")[0],n=C.createElement("img");n.src=b(i,"originalUrl"),n.alt=i.getAttribute("alt"),l++,g(n,W),p(n,Z,a.transition),v(e,j)&&(g(n,H),u=t),s.push(n),E(n,te,r,!0),X(o,n)}),x(a.interval)&&0<a.interval&&(e=function(){t.playing=setTimeout(function(){w(s[u],H),g(s[u=++u<l?u:0],H),e()},a.interval)},1<l&&e())),t},stop:function(){var e=this,t=e.player;return e.isPlayed&&(e.options.fullscreen&&e.exitFullscreen(),e.isPlayed=!1,clearTimeout(e.playing),w(t,B),S(t)),e},full:function(){var e=this,t=e.options,i=e.viewer,n=e.image,a=e.list;return!e.isShown||e.isPlayed||e.isFulled||!t.inline||(e.isFulled=!0,g(e.body,M),g(e.button,K),t.transition&&(w(n,Z),w(a,Z)),g(i,q),i.setAttribute("style",""),h(i,{zIndex:t.zIndex}),e.initContainer(),e.viewerData=f({},e.containerData),e.renderList(),e.initImage(function(){e.renderImage(function(){t.transition&&setTimeout(function(){g(n,Z),g(a,Z)},0)})})),e},exit:function(){var e=this,t=e.options,i=e.viewer,n=e.image,a=e.list;return e.isFulled&&(e.isFulled=!1,w(e.body,M),w(e.button,K),t.transition&&(w(n,Z),w(a,Z)),w(i,q),h(i,{zIndex:t.zIndexInline}),e.viewerData=f({},e.parentData),e.renderViewer(),e.renderList(),e.initImage(function(){e.renderImage(function(){t.transition&&setTimeout(function(){g(n,Z),g(a,Z)},0)})})),e},tooltip:function(){var e=this,t=e.options,i=e.tooltipBox,n=e.imageData;return e.isViewed&&!e.isPlayed&&t.tooltip&&(V(i,ve(100*n.ratio)+"%"),e.tooltiping?clearTimeout(e.tooltiping):t.transition?(e.fading&&I(i,ee),g(i,B),g(i,W),g(i,Z),N(i),g(i,H)):g(i,B),e.tooltiping=setTimeout(function(){t.transition?(E(i,ee,function(){w(i,B),w(i,W),w(i,Z),e.fading=!1},!0),w(i,H),e.fading=!0):w(i,B),e.tooltiping=!1},1e3)),e},toggle:function(){var e=this;return 1===e.imageData.ratio?e.zoomTo(e.initialImageData.ratio,!0):e.zoomTo(1,!0),e},reset:function(){var e=this;return e.isViewed&&!e.isPlayed&&(e.imageData=f({},e.initialImageData),e.renderImage()),e},update:function(){var e,a=this,o=[];return a.isImg&&!a.element.parentNode?a.destroy():(a.length=a.images.length,a.isBuilt&&(z(a.items,function(e,t){var i=Y(e,"img")[0],n=a.images[t];n?n.src!==i.src&&o.push(t):o.push(t)}),h(a.list,{width:"auto"}),a.initList(),a.isShown&&(a.length?a.isViewed&&(0<=(e=l(a.index,o))?(a.isViewed=!1,a.view(he(a.index-(e+1),0))):g(a.items[a.index],j)):(a.image=null,a.isViewed=!1,a.index=0,a.imageData=null,S(a.canvas),S(a.title)))),a)},destroy:function(){var e,t,i=this,n=i.element;return i.options.inline?i.unbind():(i.isShown&&i.unbind(),k(n,ne,i._start)),i.unbuild(),s((e=n)[t=R])?delete e[t]:e.dataset?delete e.dataset[t]:e.removeAttribute("data-"+t),i},shown:function(){var e=this,t=e.options,i=e.element;e.transitioning=!1,e.isFulled=!0,e.isShown=!0,e.isVisible=!0,e.render(),e.bind(),m(t.shown)&&E(i,oe,t.shown,!0),I(i,oe)},hidden:function(){var e=this,t=e.options,i=e.element;e.transitioning=!1,e.isViewed=!1,e.isFulled=!1,e.isShown=!1,e.isVisible=!1,e.unbind(),w(e.body,M),g(e.viewer,O),e.resetList(),e.resetImage(),m(t.hidden)&&E(i,"hidden",t.hidden,!0),I(i,"hidden")},requestFullscreen:function(){var e=C.documentElement;!this.isFulled||C.fullscreenElement||C.mozFullScreenElement||C.webkitFullscreenElement||C.msFullscreenElement||(e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},exitFullscreen:function(){this.isFulled&&(C.exitFullscreen?C.exitFullscreen():C.msExitFullscreen?C.msExitFullscreen():C.mozCancelFullScreen?C.mozCancelFullScreen():C.webkitExitFullscreen&&C.webkitExitFullscreen())},change:function(e){var t,i,n,a,o,r=this,s=r.endX-r.startX,l=r.endY-r.startY;switch(r.action){case"move":r.move(s,l);break;case"zoom":r.zoom((t=me(r.startX-r.startX2),i=me(r.startY-r.startY2),n=me(r.endX-r.endX2),a=me(r.endY-r.endY2),o=fe(t*t+i*i),(fe(n*n+a*a)-o)/o),!1,e),r.startX2=r.endX2,r.startY2=r.endY2;break;case"switch":r.action="switched",me(s)>me(l)&&(1<s?r.prev():s<-1&&r.next())}r.startX=r.endX,r.startY=r.endY},isSwitchable:function(){var e=this.imageData,t=this.viewerData;return 0<=e.left&&0<=e.top&&e.width<=t.width&&e.height<=t.height}},A.DEFAULTS={inline:!1,button:!0,navbar:!0,title:!0,toolbar:!0,tooltip:!0,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!0,keyboard:!0,interval:5e3,minWidth:200,minHeight:100,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,zIndex:2015,zIndexInline:0,url:"src",build:null,built:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null},A.TEMPLATE='<div class="viewer-container"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><ul class="viewer-toolbar"><li class="viewer-zoom-in" data-action="zoom-in"></li><li class="viewer-zoom-out" data-action="zoom-out"></li><li class="viewer-one-to-one" data-action="one-to-one"></li><li class="viewer-reset" data-action="reset"></li><li class="viewer-prev" data-action="prev"></li><li class="viewer-play" data-action="play"></li><li class="viewer-next" data-action="next"></li><li class="viewer-rotate-left" data-action="rotate-left"></li><li class="viewer-rotate-right" data-action="rotate-right"></li><li class="viewer-flip-horizontal" data-action="flip-horizontal"></li><li class="viewer-flip-vertical" data-action="flip-vertical"></li></ul><div class="viewer-navbar"><ul class="viewer-list"></ul></div></div><div class="viewer-tooltip"></div><div class="viewer-button" data-action="mix"></div><div class="viewer-player"></div></div>';var ye=y.Viewer;return A.noConflict=function(){return y.Viewer=ye,A},A.setDefaults=function(e){f(A.DEFAULTS,e)},"function"==typeof define&&define.amd&&define("viewer",[],function(){return A}),e||(y.Viewer=A),A});